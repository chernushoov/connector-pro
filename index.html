<!DOCTYPE html>
<html lang="ru" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="theme-color" content="#6B5CE7">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Connector">
    <meta name="description" content="Connector Pro - –†–∞–±–æ—Ç–∞ –Ω–∞–π–¥—ë—Ç—Å—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ">

    <title>Connector Pro</title>

    <link rel="manifest" href="./manifest.json">
    <link rel="apple-touch-icon" href="./icons/icon-192.svg">
    <link rel="stylesheet" href="./css/style.css">
</head>
<body>
    <div id="app">
        <!-- Auth Screen -->
        <div id="screen-auth" class="screen active">
            <div class="auth-container">
                <div class="auth-header">
                    <div class="logo">
                        <svg class="logo-svg" width="80" height="80" viewBox="0 0 192 192">
                            <rect width="192" height="192" rx="40" fill="white"/>
                            <g transform="translate(96, 96)">
                                <circle cx="-22" cy="0" r="30" fill="none" stroke="#6B5CE7" stroke-width="10"/>
                                <circle cx="22" cy="0" r="30" fill="none" stroke="#6B5CE7" stroke-width="10"/>
                            </g>
                            <circle cx="50" cy="96" r="6" fill="#F5BD42"/>
                            <circle cx="142" cy="96" r="6" fill="#F5BD42"/>
                        </svg>
                    </div>
                    <h1 data-l10n="app.name">Connector</h1>
                    <p class="tagline" data-l10n="app.tagline">–†–∞–±–æ—Ç–∞ –Ω–∞–π–¥—ë—Ç—Å—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ</p>
                </div>

                <div class="auth-box">
                    <h2 data-l10n="auth.title">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ, —á—Ç–æ –≤—ã –Ω–∞—Å—Ç–æ—è—â–∏–π</h2>
                    <p data-l10n="auth.sub">–ò–Ω–∞—á–µ —ç—Ç–æ —Å—Ç–∞–Ω–µ—Ç —Ñ–µ—Ä–º–æ–π —Ñ–µ–π–∫–æ–≤</p>

                    <div id="auth-step-phone" class="auth-step active">
                        <input type="tel" id="phone-input" placeholder="+972" data-l10n-placeholder="auth.phone.placeholder">
                        <button class="btn btn-primary" onclick="App.sendSMS()" data-l10n="auth.send">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–æ–¥</button>
                    </div>

                    <div id="auth-step-code" class="auth-step">
                        <input type="text" id="code-input" maxlength="6" placeholder="000000" data-l10n-placeholder="auth.code.placeholder">
                        <div id="debug-code" class="debug-code"></div>
                        <button class="btn btn-primary" onclick="App.verifySMS()" data-l10n="auth.verify">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å</button>
                        <button class="btn btn-text" onclick="App.backToPhone()" data-l10n="auth.back">‚Üê –ù–∞–∑–∞–¥</button>
                    </div>

                    <div id="auth-error" class="error-msg"></div>
                </div>

                <div class="powered" data-l10n="powered">Powered by FloorDSGN ‚Ä¢ Connector Pro</div>
            </div>

            <div class="lang-selector">
                <button onclick="App.setLang('ru')" class="lang-btn" data-lang="ru">RU</button>
                <button onclick="App.setLang('he')" class="lang-btn" data-lang="he">HE</button>
                <button onclick="App.setLang('en')" class="lang-btn" data-lang="en">EN</button>
                <button onclick="App.setLang('ar')" class="lang-btn" data-lang="ar">AR</button>
            </div>
        </div>

        <!-- Role Selection Screen -->
        <div id="screen-role" class="screen">
            <div class="role-container">
                <h1 data-l10n="role.title">–ö—Ç–æ –≤—ã?</h1>

                <div class="role-cards">
                    <div class="role-card" onclick="App.selectRole('worker')">
                        <div class="role-icon">üë∑</div>
                        <h3 data-l10n="role.worker">–ò—â—É —Ä–∞–±–æ—Ç—É</h3>
                    </div>

                    <div class="role-card" onclick="App.selectRole('employer')">
                        <div class="role-icon">üè¢</div>
                        <h3 data-l10n="role.employer">–ò—â—É —Ä–∞–±–æ—Ç–Ω–∏–∫–∞</h3>
                    </div>
                </div>

                <button class="btn btn-text logout-btn" onclick="App.logout()" data-l10n="logout">–í—ã–π—Ç–∏</button>
            </div>

            <div class="lang-selector">
                <button onclick="App.setLang('ru')" class="lang-btn" data-lang="ru">RU</button>
                <button onclick="App.setLang('he')" class="lang-btn" data-lang="he">HE</button>
                <button onclick="App.setLang('en')" class="lang-btn" data-lang="en">EN</button>
                <button onclick="App.setLang('ar')" class="lang-btn" data-lang="ar">AR</button>
            </div>
        </div>

        <!-- Worker Profile Form -->
        <div id="screen-worker-form" class="screen">
            <div class="form-container">
                <h1 data-l10n="profile.mandatory.title">–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –∞–Ω–∫–µ—Ç—É</h1>
                <p data-l10n="profile.mandatory.sub">1‚Äì2 –º–∏–Ω—É—Ç—ã. –¢–∞–∫ –≤–∞—Å –±—É–¥—É—Ç –∑–≤–∞—Ç—å –Ω–∞ —Å–º–µ–Ω—ã.</p>

                <form id="worker-form" onsubmit="App.saveWorkerProfile(event)">
                    <input type="text" id="worker-name" required data-l10n-placeholder="profile.worker.name" placeholder="–ò–º—è –∏ —Ñ–∞–º–∏–ª–∏—è">
                    <input type="tel" id="worker-phone" required data-l10n-placeholder="profile.worker.phone" placeholder="–¢–µ–ª–µ—Ñ–æ–Ω">

                    <div class="form-row">
                        <input type="text" id="worker-age" data-l10n-placeholder="profile.worker.age" placeholder="–í–æ–∑—Ä–∞—Å—Ç">
                        <input type="text" id="worker-city" required data-l10n-placeholder="profile.worker.city" placeholder="–ì–æ—Ä–æ–¥">
                    </div>

                    <input type="text" id="worker-spec" required data-l10n-placeholder="profile.worker.spec" placeholder="–°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è">

                    <div class="form-row">
                        <input type="text" id="worker-exp" data-l10n-placeholder="profile.worker.exp" placeholder="–û–ø—ã—Ç (–ª–µ—Ç)">
                        <input type="text" id="worker-rate" data-l10n-placeholder="profile.worker.rate" placeholder="–°—Ç–∞–≤–∫–∞ ‚Ç™/—á">
                    </div>

                    <label class="checkbox-label">
                        <input type="checkbox" id="worker-car">
                        <span data-l10n="profile.worker.car">–ï—Å—Ç—å –∞–≤—Ç–æ–º–æ–±–∏–ª—å</span>
                    </label>

                    <textarea id="worker-about" rows="3" data-l10n-placeholder="profile.worker.about" placeholder="–û —Å–µ–±–µ"></textarea>

                    <button type="submit" class="btn btn-primary" data-l10n="profile.worker.submit">–°–æ–∑–¥–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å</button>
                </form>
            </div>
        </div>

        <!-- Worker Main App -->
        <div id="screen-worker-app" class="screen">
            <div class="app-header">
                <button class="back-btn" onclick="App.goToRole()">‚Üê</button>
                <h1 data-l10n="tabs.shifts">–°–º–µ–Ω—ã</h1>
                <div class="header-actions">
                    <button onclick="App.showGuide()" class="icon-btn">?</button>
                </div>
            </div>

            <div class="search-bar">
                <input type="text" id="search-input" data-l10n-placeholder="search.placeholder" placeholder="–ü–æ–∏—Å–∫: —Ä–∞–±–æ—Ç–∞ / –≥–æ—Ä–æ–¥ / –∫–æ–º–ø–∞–Ω–∏—è" oninput="App.filterShifts()">
            </div>

            <div class="filters">
                <button class="filter-btn active" data-filter="all" onclick="App.setFilter('all')" data-l10n="filters.all">–í—Å–µ</button>
                <button class="filter-btn" data-filter="today" onclick="App.setFilter('today')" data-l10n="filters.today">–°–µ–≥–æ–¥–Ω—è</button>
                <button class="filter-btn" data-filter="tomorrow" onclick="App.setFilter('tomorrow')" data-l10n="filters.tomorrow">–ó–∞–≤—Ç—Ä–∞</button>
                <button class="filter-btn" data-filter="instant" onclick="App.setFilter('instant')" data-l10n="filters.instant">Instant</button>
            </div>

            <div id="shifts-list" class="shifts-list">
                <!-- Shifts will be rendered here -->
            </div>

            <nav class="tab-bar">
                <button class="tab active" data-tab="shifts" onclick="App.switchTab('shifts')">
                    <span class="tab-icon">üìã</span>
                    <span data-l10n="tabs.shifts">–°–º–µ–Ω—ã</span>
                </button>
                <button class="tab" data-tab="tasks" onclick="App.switchTab('tasks')">
                    <span class="tab-icon">‚úì</span>
                    <span data-l10n="taskflow.title">–ó–∞–¥–∞—á–∏</span>
                </button>
                <button class="tab" data-tab="profile" onclick="App.switchTab('profile')">
                    <span class="tab-icon">üë§</span>
                    <span data-l10n="tabs.profile">–ü—Ä–æ—Ñ–∏–ª—å</span>
                </button>
            </nav>
        </div>

        <!-- Shift Detail Modal -->
        <div id="modal-shift" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 id="shift-detail-title"></h2>
                    <button class="close-btn" onclick="App.closeModal('shift')">&times;</button>
                </div>
                <div id="shift-detail-content" class="modal-body">
                    <!-- Shift details will be rendered here -->
                </div>
            </div>
        </div>

        <!-- Tasks Tab Content -->
        <div id="screen-tasks" class="screen">
            <div class="app-header">
                <button class="back-btn" onclick="App.goToRole()">‚Üê</button>
                <h1 data-l10n="taskflow.title">–ú–æ–∏ –∑–∞–¥–∞—á–∏</h1>
            </div>

            <div id="tasks-list" class="tasks-list">
                <!-- Tasks will be rendered here -->
            </div>

            <nav class="tab-bar">
                <button class="tab" data-tab="shifts" onclick="App.switchTab('shifts')">
                    <span class="tab-icon">üìã</span>
                    <span data-l10n="tabs.shifts">–°–º–µ–Ω—ã</span>
                </button>
                <button class="tab active" data-tab="tasks" onclick="App.switchTab('tasks')">
                    <span class="tab-icon">‚úì</span>
                    <span data-l10n="taskflow.title">–ó–∞–¥–∞—á–∏</span>
                </button>
                <button class="tab" data-tab="profile" onclick="App.switchTab('profile')">
                    <span class="tab-icon">üë§</span>
                    <span data-l10n="tabs.profile">–ü—Ä–æ—Ñ–∏–ª—å</span>
                </button>
            </nav>
        </div>

        <!-- Profile Tab Content -->
        <div id="screen-profile" class="screen">
            <div class="app-header">
                <button class="back-btn" onclick="App.goToRole()">‚Üê</button>
                <h1 data-l10n="tabs.profile">–ü—Ä–æ—Ñ–∏–ª—å</h1>
                <div class="header-actions">
                    <button onclick="App.editProfile()" class="icon-btn">‚úèÔ∏è</button>
                </div>
            </div>

            <div id="profile-content" class="profile-content">
                <!-- Profile will be rendered here -->
            </div>

            <nav class="tab-bar">
                <button class="tab" data-tab="shifts" onclick="App.switchTab('shifts')">
                    <span class="tab-icon">üìã</span>
                    <span data-l10n="tabs.shifts">–°–º–µ–Ω—ã</span>
                </button>
                <button class="tab" data-tab="tasks" onclick="App.switchTab('tasks')">
                    <span class="tab-icon">‚úì</span>
                    <span data-l10n="taskflow.title">–ó–∞–¥–∞—á–∏</span>
                </button>
                <button class="tab active" data-tab="profile" onclick="App.switchTab('profile')">
                    <span class="tab-icon">üë§</span>
                    <span data-l10n="tabs.profile">–ü—Ä–æ—Ñ–∏–ª—å</span>
                </button>
            </nav>
        </div>

        <!-- Employer Profile Form -->
        <div id="screen-employer-form" class="screen">
            <div class="form-container">
                <h1 data-l10n="employer.mandatory.title">–ê–Ω–∫–µ—Ç–∞ —Ä–∞–±–æ—Ç–æ–¥–∞—Ç–µ–ª—è</h1>
                <p data-l10n="employer.mandatory.sub">–ß–µ—Å—Ç–Ω–æ –∏ –ø—Ä–æ–∑—Ä–∞—á–Ω–æ.</p>

                <form id="employer-form" onsubmit="App.saveEmployerProfile(event)">
                    <input type="text" id="employer-company" required data-l10n-placeholder="employer.company" placeholder="–ö–æ–º–ø–∞–Ω–∏—è">
                    <input type="text" id="employer-name" required data-l10n-placeholder="employer.contact" placeholder="–ö–æ–Ω—Ç–∞–∫—Ç–Ω–æ–µ –ª–∏—Ü–æ">
                    <input type="tel" id="employer-phone" required data-l10n-placeholder="employer.phone" placeholder="–¢–µ–ª–µ—Ñ–æ–Ω">
                    <input type="text" id="employer-city" required data-l10n-placeholder="employer.city" placeholder="–ì–æ—Ä–æ–¥">
                    <input type="text" id="employer-industry" data-l10n-placeholder="employer.industry" placeholder="–°—Ñ–µ—Ä–∞">

                    <button type="submit" class="btn btn-primary" data-l10n="employer.submit">–°–æ–∑–¥–∞—Ç—å –∫–∞–±–∏–Ω–µ—Ç</button>
                </form>
            </div>
        </div>

        <!-- Employer Main App -->
        <div id="screen-employer-app" class="screen">
            <div class="app-header">
                <button class="back-btn" onclick="App.goToRole()">‚Üê</button>
                <h1 data-l10n="tabs.dashboard">–ü–∞–Ω–µ–ª—å</h1>
                <div class="header-actions">
                    <button onclick="App.showGuide()" class="icon-btn">?</button>
                </div>
            </div>

            <div class="dashboard-content">
                <div class="card">
                    <h3 data-l10n="dashboard.title">–ü–∞–Ω–µ–ª—å</h3>
                    <p data-l10n="dashboard.subtitle">–ü—É–±–ª–∏–∫—É–π—Ç–µ —Å–º–µ–Ω—ã –∏ –≤—ã–±–∏—Ä–∞–π—Ç–µ –ª—é–¥–µ–π</p>
                </div>

                <button class="btn btn-primary btn-block" onclick="App.showCreateShift()">
                    <span data-l10n="dashboard.create.shift">+ –°–æ–∑–¥–∞—Ç—å —Å–º–µ–Ω—É</span>
                </button>

                <div id="employer-shifts" class="shifts-list">
                    <!-- Employer's shifts will be rendered here -->
                </div>

                <div id="applications-section" class="card">
                    <h3 data-l10n="dashboard.applications">–í—Ö–æ–¥—è—â–∏–µ –æ—Ç–∫–ª–∏–∫–∏</h3>
                    <div id="applications-list">
                        <!-- Applications will be rendered here -->
                    </div>
                </div>
            </div>

            <nav class="tab-bar">
                <button class="tab active" data-tab="dashboard" onclick="App.switchEmployerTab('dashboard')">
                    <span class="tab-icon">üìä</span>
                    <span data-l10n="tabs.dashboard">–ü–∞–Ω–µ–ª—å</span>
                </button>
                <button class="tab" data-tab="emp-tasks" onclick="App.switchEmployerTab('emp-tasks')">
                    <span class="tab-icon">‚úì</span>
                    <span data-l10n="taskflow.title">–ó–∞–¥–∞—á–∏</span>
                </button>
            </nav>
        </div>

        <!-- Create Shift Modal -->
        <div id="modal-create-shift" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 data-l10n="create.shift.title">–°–æ–∑–¥–∞—Ç—å —Å–º–µ–Ω—É</h2>
                    <button class="close-btn" onclick="App.closeModal('create-shift')">&times;</button>
                </div>
                <div class="modal-body">
                    <form id="create-shift-form" onsubmit="App.createShift(event)">
                        <input type="text" id="shift-title" required data-l10n-placeholder="create.shift.job.placeholder" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç—ã">

                        <div class="form-row">
                            <input type="date" id="shift-date" required>
                            <input type="time" id="shift-start" required value="09:00">
                            <input type="time" id="shift-end" required value="17:00">
                        </div>

                        <div class="form-row">
                            <input type="number" id="shift-rate" required placeholder="‚Ç™/—á–∞—Å" value="50">
                            <input type="number" id="shift-slots" required placeholder="–ú–µ—Å—Ç" value="1">
                        </div>

                        <input type="text" id="shift-city" required data-l10n-placeholder="create.shift.city.placeholder" placeholder="–ì–æ—Ä–æ–¥">

                        <textarea id="shift-requirements" rows="2" data-l10n-placeholder="create.shift.requirements.placeholder" placeholder="–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è"></textarea>

                        <label class="checkbox-label">
                            <input type="checkbox" id="shift-instant">
                            <span data-l10n="create.shift.instant">–°—Ä–æ—á–Ω–∞—è —Å–º–µ–Ω–∞ (Instant)</span>
                        </label>

                        <button type="submit" class="btn btn-primary" data-l10n="create.shift.publish">–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å</button>
                    </form>
                </div>
            </div>
        </div>

        <!-- Guide Modal -->
        <div id="modal-guide" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 data-l10n="guide.title">–ú–∏–Ω–∏-–æ–±—É—á–µ–Ω–∏–µ</h2>
                    <button class="close-btn" onclick="App.closeModal('guide')">&times;</button>
                </div>
                <div class="modal-body guide-content">
                    <p data-l10n="guide.sub">–°–¥–µ–ª–∞–Ω–æ —Ç–∞–∫, —á—Ç–æ–±—ã –≤—ã –±—ã—Å—Ç—Ä–µ–µ –Ω–∞—á–∞–ª–∏ –∑–∞—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å.</p>

                    <h4 data-l10n="guide.section.core">–ö–ª—é—á–µ–≤–∞—è –∏–¥–µ—è</h4>
                    <p data-l10n="guide.core">–ü—Ä–æ—Ñ–∏–ª—å ‚Üí –æ—Ç–∫–ª–∏–∫ ‚Üí –∫–æ–Ω—Ç–∞–∫—Ç ‚Üí —Å–º–µ–Ω–∞. –ë–µ–∑ –±—é—Ä–æ–∫—Ä–∞—Ç–∏–∏.</p>

                    <h4 data-l10n="guide.section.worker">–î–ª—è —Ä–∞–±–æ—Ç–Ω–∏–∫–æ–≤</h4>
                    <ul>
                        <li data-l10n="guide.worker.1">–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –ø—Ä–æ—Ñ–∏–ª—å</li>
                        <li data-l10n="guide.worker.2">–í–∫–ª—é—á–∏—Ç–µ Instant –¥–ª—è —Å—Ä–æ—á–Ω—ã—Ö —Å–º–µ–Ω</li>
                        <li data-l10n="guide.worker.3">–ü–∏—à–∏—Ç–µ –≤ WhatsApp –ø–æ –∫–Ω–æ–ø–∫–µ</li>
                    </ul>

                    <button class="btn btn-primary" onclick="App.closeModal('guide')" data-l10n="guide.done">–ü–æ–Ω—è–ª</button>
                </div>
            </div>
        </div>
    </div>

    <script src="./js/l10n.js"></script>
    <script src="./js/app.js"></script>
    <script>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('./sw.js');
        }
    </script>
</body>
</html>
